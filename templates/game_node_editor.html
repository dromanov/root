<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{{ data.get("stage_name", "") }}</title>

    <meta name="description" content="Source code generated using layoutit.com">
    <meta name="author" content="LayoutIt!">

    <link href="{{ static_url("bootstrap-3.3.7/css/bootstrap.min.css") }}" rel="stylesheet">
       <link rel="stylesheet" href="{{ static_url("chat.css") }}" type="text/css">
  </head>

<body class="container-fluid">
  <div class="row">
    <div class="col-sm-10 col-sm-offset-1">
      <h1>Редактор уровней</h1>
    </div>
  </div>

  <form method="POST" class="form-horizontal">
    <div class="form-group">
      <label for="id_nik" class="col-sm-2 control-label">Код уровня: </label>
      <div class="col-sm-10">
        <input type="text"
               name="nik"
               id="id_nik"
               class="form-control"
               value="{{ data["nik"] }}"
               disabled>
      </div>
    </div>

    <div class="form-group">
      <label for="id_title" class="col-sm-2 control-label">Заголовок: </label>
      <div class="col-sm-10">
        <input type="text"
               name="title"
               id="id_title"
               class="form-control"
               value="{{ data.get("title", "") }}"
               placeholder="Короткий заголовок элемента квеста">
      </div>
    </div>

    <div class="form-group">
      <label for="id_task" class="col-sm-2 control-label">Описание задания:</label>
      <div class="col-sm-10">
        <textarea name="task"
                  id="id_task"
                  class="form-control"
                  rows="5"
                  placeholder="Описание задания (html можно)">{{
          data.get("task", "")
          }}</textarea>
      </div>
    </div>

    {# Редактирование действий (Action). #}
    <div class="form-group">
      <label for="id_buttons" class="col-sm-2 control-label">
        Варианты действий:
      </label>
      <div class="col-sm-10">
        {# Уже существующие действия. #}
        {% for action_id in data.get('actions', []) %}
          <a href="../action_edit/{{ data['nik'] }}/{{ action_id }}">
            <button type="button" class="btn btn-primary">
              Action#{{ action_id }}
            </button>
          </a>
        {% end %}

        {# Меню для создания нового действия (Action). #}
        <div class="btn-group">
          <button type="button" class="btn btn-success dropdown-toggle"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Новое действие <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            {% for icon, link, label in action_menu %}
              {% if icon != "---" %}
                <li><a href="../action_new?node_id={{ data['nik'] }}&action={{ link }}">
                  <span class="glyphicon glyphicon-{{ icon }}" aria-hidden="true"></span>
                  &nbsp;{{ label }}
                </a></li>
              {% else %}
                <li role="separator" class="divider"></li>
              {%  end %}
            {%  end %}
          </ul>
        </div>
      </div>
    </div>

    <hr />
    <div class="row">
      <div class="col-sm-offset-2 col-sm-4">
        <button type="submit" class="btn btn-success">Сохранить</button>
        <a href="../game_node/{{ data["nik"] }}">
          <button type="button" class="btn btn-link">Отмена</button>
        </a>
      </div>
    </div>

    {% module xsrf_form_html() %}
  </form>

  <script src="{{ static_url("jquery.min.js") }}"></script>
  <script src="{{ static_url("bootstrap-3.3.7/js/bootstrap.min.js") }}"></script>
</body>
</html>
